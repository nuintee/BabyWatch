<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BabyWatch</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
</head>
<body  class = "m-3 h-100">
    <div class = "drawer">
        <button onclick="drawer()">„Éõ„Éº„É†</button>
        <table class = "table table-striped">
            <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Ë™∞„Åå</th>
                    <th scope="col">‰ΩïÊôÇ„Å´</th>
                    <th scope="col">‰Ωï„Çí„Åó„Åü</th>
                    <th scope="col">„Å©„ÅÆ„Åè„Çâ„ÅÑÔºü(‰ªªÊÑè)</th>
                </tr>
            </thead>
            <tbody>
                <%for (let i = 0; i < data.length; i++)  {%>
                <tr>
                    <th scope="row"><%= i + 1 %></th>
                    <td><%= data[i].who%></td>
                    <td><%= data[i].when%></td>
                    <td><%= data[i].what%></td>
                    <td>
                        <% if (data[i].what == '„Éü„É´„ÇØ') { %>
                        <%=     data[i].portion%><small>ml</small>
                        <% };%>
                    </td>
                </tr>
                <%} %> 
            </tbody>
        </table>
    </div>
    <header>
        <button onclick="drawer()">„Éá„Éº„Çø</button>
        <p class="latestPlaceHolder">„Éü„É´„ÇØ : ÊúÄÁµÇÊõ¥Êñ∞</p>
        <h6 id = "milkLatest">
            <% if (data != 0) { %>
                <% let milkIndex = 0 %>
                <% for (let i = 0; i < data.length; i++) { %>
                    <% if (data[i].what == '„Éü„É´„ÇØ') { %>
                        <% milkIndex = i %>
                    <% } %>
                <% } %>
                <%= `${data[milkIndex].when} - ${data[milkIndex].who} (${data[milkIndex].portion}ml) üçº` %>
            <% } else { %>
                „Åæ„Å†„Éá„Éº„Çø„Åå„ÅÇ„Çä„Åæ„Åõ„Çì
            <% } %>
        </h6>
        <p class = "latestPlaceHolder">„Ç™„É†„ÉÑ : ÊúÄÁµÇÊõ¥Êñ∞</p>
        <h6 id = "diaperLatest">
            <% if (data != 0) { %>
                <% let diaperIndex = 0 %>
                <% for (let i = 0; i < data.length; i++) { %>
                    <% if (data[i].what == '„Ç™„É†„ÉÑ') { %>
                        <% diaperIndex = i%>
                    <% } %>
                <% } %>
                <%= `${data[diaperIndex].when} - ${data[diaperIndex].who} üß∑` %>
            <% } else { %>
                „Åæ„Å†„Éá„Éº„Çø„Åå„ÅÇ„Çä„Åæ„Åõ„Çì
            <% } %>
        </h6>
    </header>
    <main>
        <form action = "/api" method = "POST">
            <div class = "input-group mb-3">
                <input type = "submit" class = "btn btn-primary actionBtns" name = "what" value = "„Éü„É´„ÇØ" onsubmit="check(this)">
                <input id = "milkPortion" type = "number" value = "10" step="10" name = "portion">
            </div>
            <input type= "submit" class = "btn btn-secondary actionBtns" name = "what" value="„Ç™„É†„ÉÑ" onsubmit="check(this)">
            <div>
                <select class="custom-select" id="form-select" name = "who">
                    <option value="Sho" name = "Sho">Sho</option>
                    <option value="Non" name = "Non">Non</option>
                </select>
            </div>
        </form>
    </main>
    
    <script>
        function drawer(){
            let drawerTarget = document.getElementsByClassName('drawer')[0];

            drawerTarget.classList.toggle('on')
        }
    </script>
    <style>
        .drawer {
            position: absolute;
            top:0;
            left:-100%;
            background-color: #FFF;
            transition-duration: 0.5s;
            height:100%;
            width:100%;
            margin:0;
            z-index: 100;
        }

        .drawer.on{
            transition-duration: 0.5s;
            left:0%;
        }
    </style>
</body>
</html>